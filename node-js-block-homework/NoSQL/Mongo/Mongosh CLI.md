
# Основні команди `mongosh`

## Підключення до MongoDB
```shell
mongosh "mongodb://localhost:27017"
```

## Основні команди роботи з базами даних

### Перегляд доступних баз даних
```shell
show dbs
```

### Вибір бази даних
```shell
use <ім'я_бази_даних>
```

### Створення нової бази даних (автоматично створюється при додаванні даних)
```shell
use <ім'я_нової_бази>
```

### Видалення бази даних
```shell
db.dropDatabase()
```

## Основні команди роботи з колекціями

### Перегляд колекцій в базі даних
```shell
show collections
```

### Створення нової колекції
```shell
db.createCollection("<ім'я_колекції>")
```

### Видалення колекції
```shell
db.<ім'я_колекції>.drop()
```

## Основні команди для документів

### Вставка одного документа
```shell
db.<ім'я_колекції>.insertOne({ "ключ": "значення" })
```

### Вставка декількох документів
```shell
db.<ім'я_колекції>.insertMany([{ "ключ": "значення" }, { "ключ": "значення" }])
```

### Пошук документів
```shell
db.<ім'я_колекції>.find()
db.<ім'я_колекції>.find({ "ключ": "значення" })
```

### Пошук одного документа
```shell
db.<ім'я_колекції>.findOne({ "ключ": "значення" })
```

### Ліміт результатів пошуку
```shell
db.<ім'я_колекції>.find().limit(5)
```

### Сортування результатів
```shell
db.<ім'я_колекції>.find().sort({ "ключ": 1 }) # зростання
db.<ім'я_колекції>.find().sort({ "ключ": -1 }) # спадання
```

### Оновлення одного документа
```shell
db.<ім'я_колекції>.updateOne({ "ключ": "значення" }, { $set: { "новий_ключ": "нове_значення" } })
```

### Оновлення декількох документів
```shell
db.<ім'я_колекції>.updateMany({ "ключ": "значення" }, { $set: { "новий_ключ": "нове_значення" } })
```

### Видалення одного документа
```shell
db.<ім'я_колекції>.deleteOne({ "ключ": "значення" })
```

### Видалення декількох документів
```shell
db.<ім'я_колекції>.deleteMany({ "ключ": "значення" })
```

## Індекси

### Створення індексу
```shell
db.<ім'я_колекції>.createIndex({ "ключ": 1 })
```

### Перегляд індексів колекції
```shell
db.<ім'я_колекції>.getIndexes()
```

### Видалення індексу
```shell
db.<ім'я_колекції>.dropIndex({ "ключ": 1 })
```

## Агрегація

### Використання `aggregate` для агрегації даних
```shell
db.<ім'я_колекції>.aggregate([
  { $match: { "ключ": "значення" } },
  { $group: { "_id": "$інший_ключ", "total": { $sum: "$поле" } } },
  { $sort: { "total": -1 } }
])
```

### Завершення роботи з MongoDB
```shell
exit
```